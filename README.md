# Service Keeper

<div align="center">

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Shell](https://img.shields.io/badge/Shell-Bash-green.svg)](https://www.gnu.org/software/bash/)
[![Platform](https://img.shields.io/badge/Platform-Linux-blue.svg)](https://www.linux.org/)

**ğŸš€ å¼ºå¤§çš„LinuxæœåŠ¡ä¿æ´»ç®¡ç†å™¨**

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„äº¤äº’å¼æœåŠ¡ç®¡ç†è„šæœ¬ï¼Œæ”¯æŒå¤šæœåŠ¡ç®¡ç†ã€è‡ªåŠ¨ä¿æ´»ã€å¼€æœºè‡ªå¯å’Œå®æ—¶ç›‘æ§ã€‚

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—) â€¢ [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½) â€¢ [è´¡çŒ®](#è´¡çŒ®)

</div>

---

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ¯ äº¤äº’å¼ç®¡ç†** - ç›´è§‚çš„èœå•ç•Œé¢ï¼Œè½»æ¾ç®¡ç†æ‰€æœ‰æœåŠ¡
- **ğŸ“¦ å¤šæœåŠ¡æ”¯æŒ** - åŒæ—¶ç®¡ç†å¤šä¸ªä¸åŒçš„æœåŠ¡å‘½ä»¤
- **ğŸ”„ è‡ªåŠ¨ä¿æ´»** - æ™ºèƒ½æ£€æµ‹æœåŠ¡çŠ¶æ€ï¼Œè‡ªåŠ¨é‡å¯å¼‚å¸¸é€€å‡ºçš„æœåŠ¡
- **ğŸš€ å¼€æœºè‡ªå¯** - é›†æˆSystemDï¼Œæ”¯æŒç³»ç»Ÿçº§å¼€æœºè‡ªåŠ¨å¯åŠ¨
- **ğŸ“Š å®æ—¶ç›‘æ§** - æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€ã€PIDä¿¡æ¯å’Œèµ„æºå ç”¨
- **ğŸ“ æ—¥å¿—ç®¡ç†** - æ¯ä¸ªæœåŠ¡ç‹¬ç«‹æ—¥å¿—æ–‡ä»¶ï¼Œæ–¹ä¾¿æ•…éšœæ’æŸ¥

### ç®¡ç†åŠŸèƒ½
- âœ… æ·»åŠ /åˆ é™¤æœåŠ¡
- âœ… å¯åŠ¨/åœæ­¢/é‡å¯æœåŠ¡
- âœ… æŸ¥çœ‹æœåŠ¡çŠ¶æ€åˆ—è¡¨
- âœ… å®æ—¶æ—¥å¿—æŸ¥çœ‹
- âœ… PIDæ–‡ä»¶ç®¡ç†
- âœ… é…ç½®æ–‡ä»¶ç®¡ç†

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®å®‰è£…å¹¶è¿è¡Œ

```bash
# æ–¹æ³•1ï¼šç›´æ¥ä¸‹è½½è¿è¡Œ
curl -fsSL https://raw.githubusercontent.com/DR-lin-eng/service_keeper/main/service_keeper.sh -o service_keeper.sh
chmod +x service_keeper.sh
./service_keeper.sh
```

```bash
# æ–¹æ³•2ï¼šå…‹éš†ä»“åº“
git clone https://github.com/DR-lin-eng/service_keeper.git
cd service_keeper
chmod +x service_keeper.sh
./service_keeper.sh
```

### å¿«é€Ÿæ·»åŠ æœåŠ¡ç¤ºä¾‹

å¯åŠ¨è„šæœ¬åï¼ŒæŒ‰ç…§èœå•æç¤ºï¼š

```
è¯·é€‰æ‹©æ“ä½œ [0-9]: 1
è¯·è¾“å…¥æœåŠ¡åç§°: gost-relay
è¯·è¾“å…¥è¦æ‰§è¡Œçš„å‘½ä»¤: gost -L relay+phts://:50001
æ˜¯å¦ç«‹å³å¯åŠ¨æ­¤æœåŠ¡? [y/N]: y
```

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ä¸»èœå•ç•Œé¢

```
==================== æœåŠ¡ä¿æ´»ç®¡ç†å™¨ ====================
1. æ·»åŠ æ–°æœåŠ¡
2. å¯åŠ¨æœåŠ¡
3. åœæ­¢æœåŠ¡
4. é‡å¯æœåŠ¡
5. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
6. æŸ¥çœ‹æœåŠ¡æ—¥å¿—
7. åˆ é™¤æœåŠ¡
8. è®¾ç½®å¼€æœºè‡ªå¯
9. å–æ¶ˆå¼€æœºè‡ªå¯
0. é€€å‡º
=======================================================
```

### åŸºæœ¬æ“ä½œæµç¨‹

#### 1. æ·»åŠ æœåŠ¡
- é€‰æ‹©èœå•é¡¹ `1`
- è¾“å…¥æœåŠ¡åç§°ï¼ˆå¦‚ï¼š`nginx-proxy`ï¼‰
- è¾“å…¥å®Œæ•´å‘½ä»¤ï¼ˆå¦‚ï¼š`nginx -g "daemon off;"`ï¼‰
- é€‰æ‹©æ˜¯å¦ç«‹å³å¯åŠ¨

#### 2. ç®¡ç†æœåŠ¡
- **å¯åŠ¨æœåŠ¡**ï¼šèœå•é¡¹ `2`ï¼Œé€‰æ‹©è¦å¯åŠ¨çš„æœåŠ¡
- **åœæ­¢æœåŠ¡**ï¼šèœå•é¡¹ `3`ï¼Œé€‰æ‹©è¦åœæ­¢çš„æœåŠ¡
- **é‡å¯æœåŠ¡**ï¼šèœå•é¡¹ `4`ï¼Œè‡ªåŠ¨åœæ­¢åé‡æ–°å¯åŠ¨

#### 3. ç›‘æ§æœåŠ¡
- **æŸ¥çœ‹çŠ¶æ€**ï¼šèœå•é¡¹ `5`ï¼Œæ˜¾ç¤ºæ‰€æœ‰æœåŠ¡çš„è¿è¡ŒçŠ¶æ€
- **æŸ¥çœ‹æ—¥å¿—**ï¼šèœå•é¡¹ `6`ï¼Œå®æ—¶æŸ¥çœ‹æœåŠ¡æ—¥å¿—è¾“å‡º

#### 4. å¼€æœºè‡ªå¯
- **è®¾ç½®è‡ªå¯**ï¼šèœå•é¡¹ `8`ï¼Œåˆ›å»ºSystemDæœåŠ¡
- **å–æ¶ˆè‡ªå¯**ï¼šèœå•é¡¹ `9`ï¼Œç§»é™¤SystemDé…ç½®

---

## ğŸ”§ é«˜çº§åŠŸèƒ½

### æœåŠ¡ä¿æ´»ç›‘æ§

å¯åŠ¨åå°ä¿æ´»è¿›ç¨‹ï¼Œæ¯30ç§’æ£€æŸ¥ä¸€æ¬¡æœåŠ¡çŠ¶æ€ï¼š

```bash
# å¯åŠ¨ä¿æ´»ç›‘æ§ï¼ˆåå°è¿è¡Œï¼‰
nohup ./service_keeper.sh --keep-alive > keeper.log 2>&1 &
```

### æ‰¹é‡è‡ªåŠ¨å¯åŠ¨

ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨æ‰€æœ‰é…ç½®çš„æœåŠ¡ï¼š

```bash
# æ‰‹åŠ¨è§¦å‘è‡ªåŠ¨å¯åŠ¨
./service_keeper.sh --autostart
```

### æ–‡ä»¶ç»“æ„

```
service_keeper/
â”œâ”€â”€ service_keeper.sh    # ä¸»è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ services.conf        # æœåŠ¡é…ç½®æ–‡ä»¶
â”œâ”€â”€ pids/               # PIDæ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ *.pid
â”œâ”€â”€ logs/               # æ—¥å¿—æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ *.log
â””â”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
```

### é…ç½®æ–‡ä»¶æ ¼å¼

`services.conf` æ–‡ä»¶æ ¼å¼ï¼š
```
service_name1=command1
service_name2=command2
gost-relay=gost -L relay+phts://:50001
```

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### ç½‘ç»œä»£ç†æœåŠ¡
```bash
æœåŠ¡åç§°: gost-proxy
å‘½ä»¤: gost -L relay+phts://:50001
```

### Webåº”ç”¨æœåŠ¡
```bash
æœåŠ¡åç§°: webapp
å‘½ä»¤: python3 /path/to/app.py
```

### æ•°æ®åº“æœåŠ¡
```bash
æœåŠ¡åç§°: redis-server
å‘½ä»¤: redis-server /etc/redis/redis.conf
```

### å®šæ—¶ä»»åŠ¡
```bash
æœåŠ¡åç§°: backup-service
å‘½ä»¤: /bin/bash /path/to/backup.sh
```

---

## âš™ï¸ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux (æ”¯æŒSystemD)
- **Shell**: Bash 4.0+
- **æƒé™**: æ™®é€šç”¨æˆ·æƒé™ï¼ˆè®¾ç½®å¼€æœºè‡ªå¯éœ€è¦sudoï¼‰
- **ä¾èµ–**: æ ‡å‡†Linuxå·¥å…· (ps, kill, nohupç­‰)

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

### å¼€å‘è®¡åˆ’

- [ ] æ”¯æŒDockerå®¹å™¨æœåŠ¡ç®¡ç†
- [ ] Webç•Œé¢ç®¡ç†
- [ ] æœåŠ¡ä¾èµ–å…³ç³»ç®¡ç†
- [ ] èµ„æºç›‘æ§å’Œå‘Šè­¦
- [ ] é…ç½®æ–‡ä»¶çƒ­é‡è½½

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™‹â€â™‚ï¸ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

- ğŸ› [æäº¤Issue](https://github.com/DR-lin-eng/service_keeper/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/DR-lin-eng/service_keeper/discussions)
- â­ å¦‚æœæœ¬é¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStarï¼

---

## ğŸ“Š ç»Ÿè®¡

<div align="center">

[![GitHub stars](https://img.shields.io/github/stars/DR-lin-eng/service_keeper.svg?style=social&label=Star)](https://github.com/DR-lin-eng/service_keeper)
[![GitHub forks](https://img.shields.io/github/forks/DR-lin-eng/service_keeper.svg?style=social&label=Fork)](https://github.com/DR-lin-eng/service_keeper/fork)

**è®©æœåŠ¡ç®¡ç†å˜å¾—ç®€å•ï¼**

</div>
